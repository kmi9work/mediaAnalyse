# Some code

#
Text.where('my_emot < 0').where('datetime > ?', DateTime.now - 4.week).count



arr = [["Загорелись машина и скутер в гараже", -1], ["По факту нападения на посольство РФ в Киеве возбуждено уголовное дело", -2], ["В Самаре женщина на иномарке вылетела в кювет на Красноглинском шоссе", -2], ["Загорелись машина и скутер в гараже", -1], ["По факту нападения на посольство РФ в Киеве возбуждено уголовное дело", -2], ["В Самаре женщина на иномарке вылетела в кювет на Красноглинском шоссе", -2], ["СК открыл уголовное дело о нападении на посольство в Киеве", -2], ["Старейший кинотеатр Киева горит из-за геев", -1], ["23 раза выезжали пожарные на тушение сухой травы", 0], ["В Нижегородской области в ДТП погиб полицейский", -2], ["В Сочи убит волгоградский певец Денис Курсеков", -2], ["В Омске автобус сбил пенсионерку, стоявшую на остановке", -1], ["После ограбления инкассаторов в Москве возбудили дело о разбое", -1], ["Неизвестные в масках ограбили банк в Екатеринбурге на 5 млн рублей", -1], ["В Астраханской области в ДТП с маршруткой погибли три человека", -2], ["Житель Башкирии погиб в ДТП, врезавшись в дорожный знак", -2], ["В Шиловском районе сгорела «пятерка»", -1], ["В Башкирии водитель разбился насмерть, врезавшись в дорожный знак", -2], ["Суд арестовал директора погранслужбы Казахстана до 27 декабря", 1], ["Четыре человека погибли при пожаре в Краснодарском крае", -2], ["В Бурятии сгорел очередной автомобиль", -1], ["В Челябинске расстреляли криминального авторитета", -1], ["Во Владивостоке мотоциклист сбил пешехода и сам погиб", -2], ["В Москве преступники отняли у инкассаторов 50 миллионов рублей", -1], ["Семейная пара делала порно-снимки своей пятилетней дочери", -2], ["В Челябинске застрелили криминального авторитета Мамуку", -1], ["В Кемерове у оптового наркоторговца изъято 8 кг «синтетики»", 1], ["Пассажирский автобус сбил женщину на остановке в Омске", -1], ["Пассажирский автобус попал в аварию на трассе в Новосибирской области", -1], ["В Челябинске расстреляли криминального авторитета Мамуку Небиеридзе", -1], ["На Кубани женщина задушила свою 21-летнюю дочь по «приказу бесов»", -2], ["Водитель «ВАЗа» погиб при столкновении с поездом", -2], ["Кузбассовец погиб в лобовом ДТП, пострадал ребенок", -2], ["Во Владивостоке мотоциклист сбил пешехода и погиб на месте ДТП", -2], ["В Туве пять воздушных судов возобновили поиски пропавшего Ми-8", 1], ["Семейная пара делала порнографические снимки своей пятилетней дочери", -2], ["В центре Владивостока в ДТП погиб мотоциклист", -2], ["Полиция разыскивает 8 несовершеннолетних преступников", -1], ["При крушении военного самолета в США погиб пилот", -1], ["В Калифорнии разбился военный самолет", -1], ["Крупный лесной пожар на юге Приморье потушен", 1], ["Кинотеатр в Киеве могли поджечь противники нетрадиционной ориентации", -1], ["СМИ: В Калифорнии потерпел крушение военный самолёт, погиб пилот", -1], ["В Челябинске расстреляли криминального авторитета Мамуку Небиеридзе", -1], ["Пропавшую в Твери 13-летнюю Дарью Бархатову нашли живой и здоровой", 1], ["Еще один «зеленый человечек» задержан в Кишиневском аэропорту", 1], ["В Омске врач-педиатр «скорой» впала в кому прямо на вызове и умерла", -2], ["В отношении Сергея Смирнова возбуждено уголовное дело", 1], ["В Кирове борются за жизнь придавленного глыбой снега малыша", -2], ["В Москве у автосалона неизвестные украли у инкассаторов 50 млн рублей", -1], ["В результате ДТП в Астраханской области погибли три человека", -2], ["В Башкирии в ДТП погибла женщина и двухмесячная девочка", -2], ["На юго-востоке Москвы инкассаторов ограбили на 50 млн рублей", -1], ["СКР оценит действия Авакова при погроме посольства РФ в Киеве", -2], ["В 2014 году в области произошло почти 500 лесных пожаров", 1], ["В Саратове супруги совершили двойное самоубийство в закрытом гараже", -2], ["В Засвияжье сгорел гараж с автомобилем и скутером", -1], ["В охотничьих угодьях Кыргызстана уничтожили около 800 волков и шакалов", 0], ["В Волгограде подожгли частный дом: погиб 62-летний мужчина", -2], ["Более 450 лесных пожаров произошло в Подмосковье в этом году", 1], ["В Волгоградской области снято ограничение на посещение лесов", 1], ["В Челябинске двое подростков задержали вора, ограбившего пенсионерку", 1], ["В Сочи задержали убийцу волгоградского музыканта", 1], ["В пять раз больше лесных пожаров произошло в ЦФО в этом году", -1], ["В Гомельской области горят торфяники", -1], ["В Кемеровской области в ДТП погибли водитель и двухлетний ребенок", -2], ["Два челябинских школьника задержали уличного грабителя", 1], ["В Рязанской области сгорели «Жигули»", -1], ["На пожарную технику Мурманской области выделят почти 9 млн", 1], ["Погибшие в Балезино дети могли быть знакомы с убийцей", -2], ["В Башкирии водитель «Лады Гранта» разбился, врезавшись в дорожный знак", -2], ["Дым от пожаров на торфяниках достиг Пинска", -1], ["В Забайкалье к борьбе с лесными пожарами привлекут казаков", 1], ["Минприроды Волгоградской области снят запрет на посещение лесов", 1], ["Пропавшую в Твери 13-летнюю девочку нашли живой и здоровой", 1], ["Загорелись машина и скутер в гараже", -1], ["В Челябинске школьники вычислили и задержали грабителя", 1], ["СКР вычислил организаторов нападения на посольство России в Киеве", -1], ["По факту нападения на посольство РФ в Киеве возбуждено уголовное дело", -2], ["В Самаре женщина на иномарке вылетела в кювет на Красноглинском шоссе", -2], ["Крупный пожар произошел ночью в кинотеатре в Киеве, пострадавших нет", -1], ["Чеченские партийцы посадили деревья на территории детских садов", 1], ["По факту ограбления инкассаторов в Москве возбуждено уголовное дело", 1], ["СК открыл уголовное дело о нападении на посольство в Киеве", -2], ["Старейший кинотеатр Киева горит из-за геев", -1], ["В Москве на мосту в районе ТТК появился плакат «Свобода Украине»", -1], ["23 раза выезжали пожарные на тушение сухой травы", 0], ["В Нижегородской области в ДТП погиб полицейский", -2], ["В Сочи убит волгоградский певец Денис Курсеков", -2], ["Наркополицейские изъяли у кемеровского наркоторговца 8 кг «синтетики»", 1], ["В Омске автобус сбил пенсионерку, стоявшую на остановке", -1], ["После ограбления инкассаторов в Москве возбудили дело о разбое", -1], ["Неизвестные в масках ограбили банк в Екатеринбурге на 5 млн рублей", -1], ["В Астраханской области в ДТП с маршруткой погибли три человека", -2], ["Житель Башкирии погиб в ДТП, врезавшись в дорожный знак", -2], ["В Шиловском районе сгорела «пятерка»", -1], ["В Башкирии водитель разбился насмерть, врезавшись в дорожный знак", -2], ["Суд арестовал директора погранслужбы Казахстана до 27 декабря", 1], ["Три человека погибли в ДТП в Тульской области", -2], ["В Самаре пятеро ограбили офисный центр и убили охранника", -2], ["Четыре человека погибли при пожаре в Краснодарском крае", -2], ["В Бурятии сгорел очередной автомобиль", -1], ["В лесах Сибири уже неделю нет пожаров - Рослесхоз", 1], ["В Балезино пропали несовершеннолетние брат и сестра", -1], ["Пропавший в Туве вертолет будут искать в Красноярском крае", -1], ["В Москве выявлена афера с продажей телефонов iphone 6", 1], ["В Самарской области сгорело 800 тыс. рублей", -1], ["Борьба с торфяниками продолжается", -1], ["Бывший заключенный забил ногами жителя Ртищева", -2], ["В рейд с добровольцами", 1], ["Аномально холодная погода ожидает жителей ЕАО в ноябре 2014 года", -1], ["В Тайшетском районе горел бензовоз", -1], ["В Москве выявлена крупная афера с продажей iPhone 6", 1], ["Воронежских спасателей наградили за тушение лесных пожаров", 1], ["Водитель автобуса в Перми сбил пешехода", -1], ["Добыча нефти в Белоруссии в январе-сентябре 2014 г выросла на 0,4%", 1], ["В Красноярском крае пятеро школьников отравились алкоголем", -1], ["В Тайшетском районе сгорел бензовоз", -1], ["Задымление произошло в подмосковной электричке, рейсы задерживаются", -1], ["На контроле МЧС России", 1], ["В региональном минлесхозе подвели итоги пожароопасного сезона", -1], ["В Перми автобус 22 сбил мужчину на пешеходном переходе", -1], ["В Красноярске обрушилась стена жилого дома", -1], ["Школьник в США завлек своих жертв в столовую при помощи SMS", -2], ["На базе хранения материально-технического обеспечения ВВО в Бурятии проведена внезапная тренировка пожарных команд", 1], ["Водитель автобуса в Перми сбил пешехода на зеленый свет светофора", -1], ["В Приморье байкер разбился насмерть, врезавшись в лошадь", -2], ["Спасатели разыскали двух заблудившихся в лесу охотников", -1], ["Оборот огнестрельного оружия находится на контроле полицейских", 1], ["В Мексике вспыхнул сильный пожар в международном аэропорту Мехико", -1], ["В Хабаровске из-за гололеда произошло ДТП, погиб мужчина", -2], ["Были задержаны 15 участников массовой драки на севере Москвы", 1], ["Россия с апреля планирует вернуть контрактную цену на газ для Украины", 1], ["Оператор ракеты Antares сам взорвал ее после появления неполадок", 0], ["В Буркина-Фасо отменено чрезвычайное положение", 1], ["Сайт Центризбиркома ЛНР атаковали хакеры", -1], ["Нарышкин: Россия ищет любую возможность для равного диалога с Западом", 1], ["Сводки от ополчения Новороссии сегодня, 31 октября: карта боевых действий, ситуация на юго-востоке Украины 31.10.2014 ФОТО и ВИДЕО 18+", -2], ["СМИ: Российских студентов привлекут к строительству Керченского моста", 1], ["Россия, Украина и ЕК подписали трехсторонний протокол по газу", 1], ["Путин, Меркель, Олланд и Порошенко приветствуют финал газового спора", 1], ["Эттингер: У Украины будет четыре источника для оплаты российского газа", 1], ["Мощный циклон может вызвать ЧС в пяти регионах Дальнего Востока", -1], ["Президент Буркина-Фасо отменил чрезвычайное положение в стране", 1], ["Режиссеру Роману Полански вновь удалось избежать ареста Интерполом", 0], ["Москва и Мехико намерены развивать сотрудничество между городами", 1], ["Актер Михаил Пореченков оказался в центре разгорающегося скандала", 0], ["Сенаторов вслед за депутатами попросят сдать дипломатические паспорта", -1], ["Глава Буркина-Фасо одобрил создание в стране переходного правительства", 1], ["Сайт Центризбиркома ЛНР подвергся хакерской атаке", -1], ["Новак: перенос решения по OPAL является политическим шагом", -1], ["«Спартак» проиграл «Рубину» и вылетел из Кубка России", 0], ["Вопрос о доступе «Газпрома» к газопроводу OPAL вновь отложен", -1], ["МВД возбудит уголовное дело против Пореченкова", 0], ["Россия с апреля планирует вернуть контрактную цену на газ для Украины", 1], ["Сенаторов вслед за депутатами попросят сдать дипломатические паспорта", -1], ["В Буркина-Фасо армия распустила парламент", 1], ["ООН выступила против выборов в Новороссии", -1], ["Новак: для Украины с апреля начнет действовать контрактная цена на газ", 1], ["Путин внёс законопроект о запрете спайсов", 1], ["4 человека погибли в Люберцах из-за нарушений в конструкции парковки", -2], ["Были задержаны 15 участников массовой драки на севере Москвы", 1], ["Продан: подпись ЕК под газовым пакетом будет гарантией его исполнения", 1], ["Россия, Украина и Евросоюз подписали трехсторонний договор по газу", 1], ["Эттингер: граждане Европы могут быть спокойны за поставки газа зимой", 1], ["Россия и Украина подписали газовое соглашение", 1], ["В Брюсселе подписан договор о поставках российского газа", 1], ["Россия, Украина и Евросоюз достигли договорённости по газу", 1], ["Украинская люстрация уже коснулась нескольких сотен руководителей", -1], ["Россия, Украина и ЕС договорились о поставках газа в зимний период", 1], ["В Люберцах четыре человека погибли при падении машины с парковки", -2], ["Порошенко и глава ЕК обсудили финансовые механизмы поставок газа", 1], ["Новости Новороссии 30 октября: что происходит в ЛНР и ДНР", -1], ["Исполком РФС принял новый лимит на легионеров по системе «10+15»", 0], ["Новак рассчитывает сегодня подписать газовое соглашение с Украиной", 1], ["Экс-министр Слюняев объяснил, почему сменил фамилию", 0], ["Израиль отозвал «для консультаций» своего посла в Швеции", 0], ["Президент Буркина-Фасо распустил правительство и ввел режим ЧП", -1], ["Байден поздравил граждан Украины с проведением успешных выборов", -1], ["Четыре человека погибли в результате крушения самолета в США", -2], ["В Буркина-Фасо будет создано переходное правительство", 1], ["Замглавы МВД Ингушетии подозревают в мошенничестве на 6,5 млн руб", -1], ["В московской квартире найдено тело 17-летнего подростка", -2], ["На северо-востоке Москвы убили подростка", -2], ["Подросток найден убитым в своей квартире на северо-востоке Москвы", -2], ["В Нижегородской области иномарка сбила насмерть двух дорожных рабочих", -2], ["Неизвестные убили подростка на северо-востоке Москвы", -2], ["В московском метро опровергли сбой на «фиолетовой» ветке", 1], ["Замотанное в скотч тело 17-летнего подростка найдено в Москве", -2], ["В Ростове 37-летний мужчина убил супругов разделочной доской и ножом", -2], ["Пал травы угрожает пожарами пригородам Великого Новгорода", -1], ["А вы ноктюрн сыграть смогли бы на ксилофоне под шепот ветра", 1], ["В Подмосковье «Газель» столкнулась с грузовиком, пять пострадавших", -1], ["Водитель микроавтобуса в Калининграде протаранил остановку", -1], ["Губернатор рекомендовал «уйти от позора» с количеством лесов", 1], ["В Москве арестованы подозреваемые в изнасиловании порноактрисы", -2], ["В Москве на Ленинградском проспекте грузовик протаранил пять машин", -1], ["В Ростове 37-летний мужчина убил супругов разделочной доской и ножом", -2], ["Двое мужчин арестованы в Москве по делу об изнасиловании порноактрисы", -2], ["В Оренбурге годовалый ребенок отравился синтетическим наркотиком", -2], ["На Кубани КАМАЗ из-за отказа тормозов протаранил два автобуса", -1], ["В Смоленской области в страшном ДТП погибли три человека", -2], ["В Перми утром произошла возгорание в доме по улице Подлесная", -1], ["В Нижегородской области Toyota сбила насмерть двух дорожных рабочих", -2], ["В Петербурге задержали банду, грабившую посетителей ночных клубов", 1], ["В Нижегородской области 9-летний школьник утонул, провалившись под лед", -2], ["Пять человек пострадали в ДТП с «Газелью» и грузовиком в Подмосковье", -1], ["В ДТП на трассе М-5 «Урал» погибла целая семья", -2], ["Годовалая девочка в Оренбурге отравилась «спайсом» матери", -2], ["В Брянской области отменили режим ЧС, введённый из-за торфяных пожаров", 1], ["В Оренбурге годовалый ребенок отравился синтетическим наркотиком", -2], ["С начала года в Псковской области 4 раза горели памятники культуры", -1], ["В Саратовской области в лесных питомниках вырастили 6 млн сеянцев", 1], ["В Тарханах на пруду по лед провалился 10-летний мальчик", 2], ["В Брянской области отменили режим чрезвычайной ситуации", 1], ["В городе Аша Челябинской области по городу гулял раненый медведь", 1], ["В Брянской области отменен режим ЧС, введенный из-за торфяных пожаров", 1], ["Проблемы лесного надзора обсуждали в Нижнем Новгороде", 1], ["В Волгоградской области во время пожара погиб 2-летний ребенок", -2], ["Годовалая девочка в Оренбурге отравилась синтетическим наркотиком", -2], ["В результате ДТП в Подмосковье пострадали пять человек", -1], ["В Нижегородской области иномарка сбила насмерть двоих дорожных рабочих", -2], ["На пожаре в жилом доме погибли три человека", -2], ["Жители Аши сняли на видео следы медведя, бродившего по городу", 1], ["Из-за коммунального ЧП жители Екатеринбурга остались без горячей воды", -1], ["За пожароопасный сезон 2014 г. в Самарской области пострадало почти 47 га леса", -1], ["Пермский блогер и экологи поспорили, чей лес гуще", 0], ["В Оренбурге годовалая девочка отравилась «спайсом»", -2], ["Власти Архангельской области намерены привлечь в освоение лесов более 42 млрд рублей", 1], ["В Смоленской области в ДТП погибли три человека", -2], ["В Эстонии школьник на уроке застрелил учителя", -2]]

def tt
  t = Time.now
  p yield
  puts Time.now - t
end
q = Query.find(5)
tt{q.texts.count}

tt{q.texts.source_count('sn')}


Category.all.each{|c| c.user = u; c.save}
Query.all.each{|c| c.user = u; c.save}
